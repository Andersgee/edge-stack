generator kysely {
    provider = "prisma-kysely"
    output   = "../src/db"
    fileName = "types.ts"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_MYSQL_URL")
}

model User {
    id            Int     @id @default(autoincrement())
    //auth
    email         String  @unique //allow multiple sign in methods, but same email would be same user.
    googleUserSub String? @unique
    discordUserId String? @unique
    githubUserId  Int?    @unique
    image         String?
    name          String

    createdAt DateTime @default(now())

    //app
    posts Post[]
}

model Post {
    id   Int    @id @default(autoincrement())
    text String

    createdAt DateTime @default(now()) @db.DateTime(3)
    updatedAt DateTime @default(now()) @updatedAt @db.DateTime(3)
    hmm       DateTime @default(now()) @updatedAt @db.DateTime(3)

    user   User @relation(fields: [userId], references: [id], onDelete: Cascade)
    userId Int
}

model Example {
    id   Int    @id @default(autoincrement())
    text String
}
